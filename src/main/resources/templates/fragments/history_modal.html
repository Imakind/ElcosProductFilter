<!-- fragments/history_sidebar.html -->
<div th:fragment="proposalHistoryModal">

    <div class="offcanvas offcanvas-end" tabindex="-1" id="historySidebar" aria-labelledby="historySidebarLabel">
        <div class="offcanvas-header">
            <h5 id="historySidebarLabel">История сохранённых проектов</h5>
            <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Закрыть"></button>
        </div>
        <div class="offcanvas-body">
            <ul class="list-group" th:if="${proposalHistory != null}">
                <li class="list-group-item d-flex justify-content-between align-items-center"
                    th:each="p : ${proposalHistory}">
                    <div>
                        <div th:text="${p.name}">Название</div>
                        <small class="text-muted" th:text="${p.formattedTimestamp}">Дата</small>
                    </div>
                    <div>
                        <form method="post" th:action="@{/cart/load-estimate}">
                            <input type="hidden" name="proposalId" th:value="${p.id}" />
                            <button type="submit" class="btn btn-sm btn-primary">Открыть</button>
                        </form>
                    </div>
                </li>
            </ul>
            <div th:if="${proposalHistory == null or proposalHistory.isEmpty()}" class="text-muted">
                Нет сохранённых проектов.
            </div>
        </div>
    </div>
</div>


